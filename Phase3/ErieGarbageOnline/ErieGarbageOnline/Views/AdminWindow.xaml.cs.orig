using System.Collections.Generic;
using System.Windows;
using ErieGarbageOnline.Controllers;
using ErieGarbageOnline.Models;

namespace ErieGarbageOnline.Views
{
    /// <summary>
    /// Interaction logic for AdminWindow.xaml
    /// </summary>
    public partial class AdminWindow : Window
    {
<<<<<<< HEAD
        private AdminController _adminController;
        //public List<Message> msgList; 
=======
        private readonly AdminController _adminController;
>>>>>>> 24ba4d4cdf9f693e1a631cfead343a99dcd07885
        public AdminWindow(AdminController adminController)
        {
            _adminController = adminController;
            InitializeComponent();
        }

        private void SubmitAdminButton_Click(object sender, RoutedEventArgs e)
        {
            // Create admin from given information
            var admin = new Admin
            {
                Email = EmailBox.Text,
                Password = PasswordBox.Password,
                Firstname = FirstNameBox.Text,
                Lastname = LastNameBox.Text
            };
            // attempt to add the admin to the DB
            _adminController.CreateAdmin(admin);
        }

        private void SendEmailButton_Click(object sender, RoutedEventArgs e)
        {
            string receiver = ReceiverBox.SelectedItem.ToString();
            string subject = SubjectBox.Text;
            string body = BodyBox.Text;

            // send the email
            _adminController.SendEmail(receiver, subject, body);
        }

        private void LogoutButton_Click(object sender, RoutedEventArgs e)
        {
            _adminController.Logout();
        }
    }
}
